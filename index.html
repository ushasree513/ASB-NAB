<!DOCTYPE html>
<html>
<head>
    <title>Customer Information Form</title>
</head>
<body>
    <h1>Customer Information Form</h1>
    <form id="customerForm">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required><br><br>

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required><br><br>

        <label for="customerId">Customer ID:</label>
        <input type="text" id="customerId" name="customerId" required><br><br>

        <button type="button" onclick=submitForm()>Submit</button>
    </form>

    <script>
        function submitForm() {
            // Get form elements
            const firstName = document.getElementById("firstName").value;
            const lastName = document.getElementById("lastName").value;
            const customerId = document.getElementById("customerId").value;

            console.log(firstName, lastName, customerId);


            // Validate input fields (add more validation as needed)
            if (firstName === "" || lastName === "" || customerId === "") {
                alert("Please fill in all fields.");
                return;
            }

            
            const customerInfo = {
                CustomerID: customerId, 
                CustomerName:`${firstName} ${lastName}`,
                Gender:"M",
                DateOfBirth:"1945/07/01",
                OccupationCode:"457213",
                TaxIDNum:"925076667",
                IndustryCode:"20470",
                Address:"The Corner, Fairytail World",
                IsAddrlsectronicallyValidated:"True",
                ECDDRequiredFlag:"False" 
            };

            const jsonData = {
               
                SubjectID: 1000001,
                AppID: "SmartDecisor",
                ContextName: "Customer",
                Channel: "Email",
                Direction: "Outbound",
                ContainerName: "NextBestAction",
                CustomerInfo: customerInfo,
                Contexts: []
            };

           
            fetch('https://lnd01.areteans.com/prweb/api/PegaMKTContainer/v4/container', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    // Add any additional headers required by your API (e.g., authentication)
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error('API request failed:', response.status, response.statusText);
                    }
                })
            .then(data => {
                    if (data.Status === "OK" && data.ContainerList.length > 0) {
                        const rankedResults = data.ContainerList[0].RankedResults;
                        const hasNoDefect = rankedResults.some(result => result.CustValidationData === "No defect");

                        if (hasNoDefect) {
                            alert("Data is available");
                            console.log("Data is available");
                            // Log the message or perform other actions here
                        } else {
                            alert("Data not available");
                            console.log("Data is not available");
                            // Log a different message or handle the case differently
                        }
                    } else {
                        console.error('API response is not as expected');
                    }
                })
            .catch(error => {
                console.error('API request failed:', error);
                // Optionally, display an error message to the user
            });
                }
    </script>
</body>
</html>